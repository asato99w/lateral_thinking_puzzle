# 検証 Step 4d: シフト方向検証（静的分析）

使用規則: シフト方向検証 → Step 1（静的分析）

## 方針

各遷移 P_i → P_{i+1} について、質問群の correct_effect が P_{i+1} 方向を支持しているかを静的に分析する。各質問の anomaly_count, support, oppose, net_direction を算出し、4分類および集合レベル指標を導出する。

## 1. P1 → P2 の静的分析

### 質問レベルの分析

| ID | 層 | anomaly(P1) | support(P2) | oppose(P2) | net | 分類 |
|---|---|---|---|---|---|---|
| q-01 | 0 | 5 | 0 | 5 | -5 | 駆動・逆方向 |
| q-02 | 0 | 2 | 0 | 2 | -2 | 駆動・逆方向 |
| q-03 | 0 | 1 | 1 | 0 | +1 | **遷移駆動** |
| q-04 | 0 | 2 | 0 | 2 | -2 | 駆動・逆方向 |
| q-05 | 0 | 1 | 0 | 1 | -1 | 駆動・逆方向 |
| q-06 | 0 | 2 | 0 | 2 | -2 | 駆動・逆方向 |
| q-07 | 0 | 1 | 0 | 1 | -1 | 駆動・逆方向 |
| q-08 | 0 | 1 | 0 | 1 | -1 | 駆動・逆方向 |
| q-09 | 0 | 0 | 0 | 0 | 0 | 中立 |
| q-10 | 0 | 0 | 0 | 0 | 0 | 中立 |
| q-11 | 1 | 0 | 0 | 1 | -1 | 中立 |
| q-12 | 1 | 0 | 1 | 0 | +1 | 方向支持 |
| q-13 | 1 | 0 | 1 | 0 | +1 | 方向支持 |
| q-14 | 1 | 1 | 1 | 0 | +1 | **遷移駆動** |
| q-15 | 1 | 0 | 0 | 0 | 0 | 中立 |
| q-16 | 1 | 0 | 0 | 1 | -1 | 中立 |
| q-17 | 2 | 0 | 0 | 0 | 0 | 中立 |
| q-18 | 2 | 0 | 0 | 0 | 0 | 中立 |
| q-19 | 2 | 2 | 0 | 2 | -2 | 駆動・逆方向 |
| q-20 | 2 | 2 | 0 | 2 | -2 | 駆動・逆方向 |
| q-21 | 2 | 2 | 0 | 2 | -2 | 駆動・逆方向 |
| q-22 | 3 | 0 | 0 | 0 | 0 | 中立 |
| q-23 | 3 | 1 | 0 | 1 | -1 | 駆動・逆方向 |
| q-24 | 3 | 0 | 0 | 0 | 0 | 中立 |
| q-25 | 3 | 0 | 0 | 0 | 0 | 中立 |
| q-26 | 3 | 0 | 0 | 0 | 0 | 中立 |
| q-27 | 4 | 1 | 0 | 1 | -1 | 駆動・逆方向 |
| q-28 | 4 | 0 | 0 | 0 | 0 | 中立 |
| q-29 | 4 | 0 | 0 | 0 | 0 | 中立 |

### 集合レベル指標

| 分類 | 質問数 | 質問 |
|---|---|---|
| 遷移駆動 | 2 | q-03, q-14 |
| 駆動・逆方向 | 12 | q-01,02,04,05,06,07,08,19,20,21,23,27 |
| 方向支持 | 2 | q-12, q-13 |
| 中立 | 13 | q-09,10,11,15,16,17,18,22,24,25,26,28,29 |

- **遷移方向スコア** = Σnet / Σ(support+oppose) = -20 / 28 = **-0.714**
- **駆動率** = |遷移駆動| / (|遷移駆動| + |駆動・逆方向|) = 2 / 14 = **0.143**
- **S1**: ✗（スコア負）
- **S2**: ✗（駆動率 < 0.5）

### 構造的分析

P1→P2 の方向スコアが大幅に負となる原因: **P1 と P2 は Fs 側の予測の大部分を共有している**。P2 は P1 から {Fs-34, Fs-35, Fs-87, Fs-89} のみが異なり、残りの Fs 予測（Fs-14, Fs-27, Fs-39, Fs-40, Fs-41, Fs-42, Fs-51, Fs-54, Fs-60, Fs-61, Fs-67, Fs-75 等）は全て同一値（=1）を維持する。

したがって、これらの共有記述素に対する正答（=0）は P1 のアノマリーであると同時に P2 にも反する。P1→P2 遷移は P_pred の大規模な変更ではなく、{Fs-34, Fs-35} という限定的な flip に基づく微調整型遷移であるため、Q(P_i) 全体としての方向スコアは P2 に向かない。

**この構造的特性は正常な挙動であり、遷移メカニズムは静的方向スコアではなく、neighbors 制約と flip 記述素のカバーによって保証される。**

## 2. P2 → P3 の静的分析

### 質問レベルの分析

| ID | 層 | anomaly(P2) | support(P3) | oppose(P3) | net | 分類 |
|---|---|---|---|---|---|---|
| q-01 | 0 | 5 | 3 | 0 | +3 | **遷移駆動** |
| q-02 | 0 | 2 | 0 | 0 | 0 | 駆動・逆方向 |
| q-03 | 0 | 0 | 1 | 0 | +1 | 方向支持 |
| q-04 | 0 | 2 | 2 | 0 | +2 | **遷移駆動** |
| q-05 | 0 | 1 | 0 | 0 | 0 | 駆動・逆方向 |
| q-06 | 0 | 2 | 0 | 0 | 0 | 駆動・逆方向 |
| q-07 | 0 | 1 | 0 | 0 | 0 | 駆動・逆方向 |
| q-08 | 0 | 1 | 1 | 0 | +1 | **遷移駆動** |
| q-09 | 0 | 0 | 1 | 0 | +1 | 方向支持 |
| q-10 | 0 | 0 | 1 | 0 | +1 | 方向支持 |
| q-11 | 1 | 1 | 1 | 0 | +1 | **遷移駆動** |
| q-12 | 1 | 0 | 1 | 0 | +1 | 方向支持 |
| q-13 | 1 | 0 | 0 | 0 | 0 | 中立 |
| q-14 | 1 | 0 | 1 | 0 | +1 | 方向支持 |
| q-15 | 1 | 0 | 1 | 0 | +1 | 方向支持 |
| q-16 | 1 | 1 | 1 | 0 | +1 | **遷移駆動** |
| q-17 | 2 | 0 | 2 | 0 | +2 | 方向支持 |
| q-18 | 2 | 0 | 0 | 1 | -1 | 中立 |
| q-19 | 2 | 2 | 2 | 0 | +2 | **遷移駆動** |
| q-20 | 2 | 2 | 0 | 2 | -2 | 駆動・逆方向 |
| q-21 | 2 | 2 | 0 | 0 | 0 | 駆動・逆方向 |
| q-22 | 3 | 0 | 0 | 0 | 0 | 中立 |
| q-23 | 3 | 1 | 0 | 1 | -1 | 駆動・逆方向 |
| q-24 | 3 | 0 | 0 | 0 | 0 | 中立 |
| q-25 | 3 | 0 | 0 | 0 | 0 | 中立 |
| q-26 | 3 | 0 | 0 | 0 | 0 | 中立 |
| q-27 | 4 | 1 | 0 | 1 | -1 | 駆動・逆方向 |
| q-28 | 4 | 0 | 0 | 0 | 0 | 中立 |
| q-29 | 4 | 0 | 0 | 0 | 0 | 中立 |

### 集合レベル指標

| 分類 | 質問数 | 質問 |
|---|---|---|
| 遷移駆動 | 6 | q-01,04,08,11,16,19 |
| 駆動・逆方向 | 8 | q-02,05,06,07,20,21,23,27 |
| 方向支持 | 7 | q-03,09,10,12,14,15,17 |
| 中立 | 8 | q-13,18,22,24,25,26,28,29 |

- **遷移方向スコア** = 13 / 23 = **+0.565**
- **駆動率** = 6 / 14 = **0.429**
- **S1**: ✓（スコア正）
- **S2**: ✗（駆動率 < 0.5）

### 構造的分析

P2→P3 は方向スコアが正であり、全体としては P3 方向に向いている。しかし駆動率が 0.5 を下回る。

駆動・逆方向の内訳:
- q-02,05,06,07: P2 のアノマリーだが P3 で不定化する記述素を含む → P3 を支持も反対もしない
- q-20,21: P3 より深い（P4 方向の）記述素 → P3 を超えた方向に向かう
- q-23,27: P5(T) 方向の記述素 → P3 をスキップする方向

P3 で不定化する記述素が多いため、P2 のアノマリー質問の一部が P3 に対して中立（net=0）となり、駆動・逆方向に分類される。これは P3 の予測範囲が狭いことに起因する構造的特性である。

## 3. P3 → P4 の静的分析

### 質問レベルの分析

| ID | 層 | anomaly(P3) | support(P4) | oppose(P4) | net | 分類 |
|---|---|---|---|---|---|---|
| q-01 | 0 | 0 | 3 | 0 | +3 | 方向支持 |
| q-02 | 0 | 0 | 0 | 0 | 0 | 中立 |
| q-03 | 0 | 0 | 1 | 0 | +1 | 方向支持 |
| q-04 | 0 | 0 | 2 | 0 | +2 | 方向支持 |
| q-05 | 0 | 0 | 0 | 0 | 0 | 中立 |
| q-06 | 0 | 0 | 0 | 0 | 0 | 中立 |
| q-07 | 0 | 0 | 0 | 0 | 0 | 中立 |
| q-08 | 0 | 0 | 1 | 0 | +1 | 方向支持 |
| q-09 | 0 | 0 | 1 | 0 | +1 | 方向支持 |
| q-10 | 0 | 0 | 1 | 0 | +1 | 方向支持 |
| q-11 | 1 | 0 | 1 | 0 | +1 | 方向支持 |
| q-12 | 1 | 0 | 1 | 0 | +1 | 方向支持 |
| q-13 | 1 | 0 | 0 | 0 | 0 | 中立 |
| q-14 | 1 | 0 | 1 | 0 | +1 | 方向支持 |
| q-15 | 1 | 0 | 1 | 0 | +1 | 方向支持 |
| q-16 | 1 | 0 | 1 | 0 | +1 | 方向支持 |
| q-17 | 2 | 0 | 2 | 0 | +2 | 方向支持 |
| q-18 | 2 | 1 | 1 | 0 | +1 | **遷移駆動** |
| q-19 | 2 | 0 | 2 | 0 | +2 | 方向支持 |
| q-20 | 2 | 2 | 2 | 0 | +2 | **遷移駆動** |
| q-21 | 2 | 0 | 3 | 0 | +3 | 方向支持 |
| q-22 | 3 | 0 | 1 | 0 | +1 | 方向支持 |
| q-23 | 3 | 1 | 0 | 0 | 0 | 駆動・逆方向 |
| q-24 | 3 | 0 | 2 | 0 | +2 | 方向支持 |
| q-25 | 3 | 0 | 1 | 0 | +1 | 方向支持 |
| q-26 | 3 | 0 | 0 | 0 | 0 | 中立 |
| q-27 | 4 | 1 | 0 | 1 | -1 | 駆動・逆方向 |
| q-28 | 4 | 0 | 0 | 0 | 0 | 中立 |
| q-29 | 4 | 0 | 0 | 0 | 0 | 中立 |

### 集合レベル指標

| 分類 | 質問数 | 質問 |
|---|---|---|
| 遷移駆動 | 2 | q-18, q-20 |
| 駆動・逆方向 | 2 | q-23, q-27 |
| 方向支持 | 17 | q-01,03,04,08,09,10,11,12,14,15,16,17,19,21,22,24,25 |
| 中立 | 8 | q-02,05,06,07,13,26,28,29 |

- **遷移方向スコア** = 28 / 30 = **+0.933**
- **駆動率** = 2 / 4 = **0.500**
- **S1**: ✓（スコア正）
- **S2**: 境界値（= 0.5）

### 構造的分析

P3→P4 は方向スコアが非常に高い（+0.933）。ほぼ全ての質問の correct_effect が P4 と整合する。駆動率が 0.5 ちょうどなのは、P3 のアノマリー質問が4問しかなく（q-18, q-20, q-23, q-27）、そのうち2問（q-23, q-27）が P4 ではなく P5 方向であることによる。

- q-23（Pt-1:1）: P4 では Pt-1=不定のため P4 を支持しない → 駆動・逆方向
- q-27（Fs-51:0）: P4=1 と反する → 駆動・逆方向

これは P3→P4 の遷移が q-18, q-20 の2問で十分に駆動されることを意味する。q-23, q-27 は P4 を飛び越えて P5 に向かう性質を持つが、層3, 4 に位置するため P3 フェーズでは到達しにくく、スキップリスクは限定的。

## 4. P4 → P5(T) の静的分析

### 質問レベルの分析

| ID | 層 | anomaly(P4) | support(P5) | oppose(P5) | net | 分類 |
|---|---|---|---|---|---|---|
| q-01 | 0 | 0 | 5 | 0 | +5 | 方向支持 |
| q-02 | 0 | 0 | 2 | 0 | +2 | 方向支持 |
| q-03 | 0 | 0 | 1 | 0 | +1 | 方向支持 |
| q-04 | 0 | 0 | 2 | 0 | +2 | 方向支持 |
| q-05 | 0 | 0 | 1 | 0 | +1 | 方向支持 |
| q-06 | 0 | 0 | 2 | 0 | +2 | 方向支持 |
| q-07 | 0 | 0 | 1 | 0 | +1 | 方向支持 |
| q-08 | 0 | 0 | 1 | 0 | +1 | 方向支持 |
| q-09 | 0 | 0 | 1 | 0 | +1 | 方向支持 |
| q-10 | 0 | 0 | 1 | 0 | +1 | 方向支持 |
| q-11 | 1 | 0 | 1 | 0 | +1 | 方向支持 |
| q-12 | 1 | 0 | 1 | 0 | +1 | 方向支持 |
| q-13 | 1 | 0 | 1 | 0 | +1 | 方向支持 |
| q-14 | 1 | 0 | 1 | 0 | +1 | 方向支持 |
| q-15 | 1 | 0 | 1 | 0 | +1 | 方向支持 |
| q-16 | 1 | 0 | 1 | 0 | +1 | 方向支持 |
| q-17 | 2 | 0 | 2 | 0 | +2 | 方向支持 |
| q-18 | 2 | 0 | 1 | 0 | +1 | 方向支持 |
| q-19 | 2 | 0 | 2 | 0 | +2 | 方向支持 |
| q-20 | 2 | 0 | 2 | 0 | +2 | 方向支持 |
| q-21 | 2 | 0 | 3 | 0 | +3 | 方向支持 |
| q-22 | 3 | 0 | 1 | 0 | +1 | 方向支持 |
| q-23 | 3 | 0 | 1 | 0 | +1 | 方向支持 |
| q-24 | 3 | 0 | 3 | 0 | +3 | 方向支持 |
| q-25 | 3 | 0 | 1 | 0 | +1 | 方向支持 |
| q-26 | 3 | 0 | 2 | 0 | +2 | 方向支持 |
| q-27 | 4 | 1 | 3 | 0 | +3 | **遷移駆動** |
| q-28 | 4 | 0 | 3 | 0 | +3 | 方向支持 |
| q-29 | 4 | 0 | 3 | 0 | +3 | 方向支持 |

### 集合レベル指標

| 分類 | 質問数 | 質問 |
|---|---|---|
| 遷移駆動 | 1 | q-27 |
| 駆動・逆方向 | 0 | — |
| 方向支持 | 28 | q-01〜q-26, q-28, q-29 |
| 中立 | 0 | — |

- **遷移方向スコア** = 51 / 51 = **+1.000**
- **駆動率** = 1 / 1 = **1.000**
- **S1**: ✓（スコア最大）
- **S2**: ✓（駆動率最大）

### 構造的分析

P4→P5(T) は完全な方向整合を示す。P5 は真理論（T）そのものであるため、全質問の correct_effect が P5 の予測と整合する。P4 の唯一のアノマリー（Fs-51）は q-27 で解決される。

## 5. シフト方向検証まとめ

### 静的条件

| 遷移 | 方向スコア | S1 | 駆動率 | S2 | 診断 |
|---|---|---|---|---|---|
| P1→P2 | -0.714 | **✗** | 0.143 | **✗** | 構造的特性（後述） |
| P2→P3 | +0.565 | ✓ | 0.429 | **✗** | 方向は正だが駆動率不足 |
| P3→P4 | +0.933 | ✓ | 0.500 | 境界 | ほぼ頑健 |
| P4→P5 | +1.000 | ✓ | 1.000 | ✓ | 完全整合 |

### 不充足の評価

#### P1→P2: S1✗, S2✗

**原因**: P1 と P2 は Fs 側の予測をほぼ共有する隣接パラダイムであり、P1→P2 は flip 記述素 {Fs-34, Fs-35} のみの微調整型遷移。Q(P) の大多数の質問は両パラダイムに共通のアノマリーを持つため、P2 への方向性を示さない。

**緩和要因**:
1. **neighbors 制約**: P2 ∈ neighbors(P1) であり、シフト先候補は近傍に限定される。P5(T) 方向の質問が多くても、P5 が P1 の近傍でなければスキップは起きない
2. **flip 記述素のカバー**: q-03（Fs-34:0 → P2 と一致）と q-14（Fs-35:1 → P2 と一致）が遷移駆動として機能する
3. **層構造による制御**: q-14 は層1（{Fs-39:0} が prerequisite）であり、層0 の仮説排除後に開く設計

**判定**: 構造的特性による不充足。neighbors 制約と flip カバーにより遷移は保証される。差し戻し不要。

#### P2→P3: S2✗

**原因**: P2 のアノマリー質問14問のうち8問が P3 で不定化する記述素を含むため、net=0 で駆動・逆方向に分類される。P3 の予測範囲が P2 より狭い（多くの記述素が不定化する）ことによる構造的特性。

**緩和要因**:
1. 遷移駆動が6問存在し、q-01, q-04, q-08, q-11, q-16, q-19 が P3 方向を支持する
2. 方向スコア自体は +0.565 で十分な正値
3. 駆動・逆方向の質問の多くは P3 に対して中立（oppose=0）であり、積極的に P3 から逸脱するわけではない

**判定**: 方向スコアが正であり遷移駆動が6問存在するため、実質的な遷移は機能する。差し戻し不要。

#### P3→P4: S2 境界

**原因**: P3 のアノマリー質問が4問のみであり、2/4 が遷移駆動。分母が小さいため駆動率が 0.500 の境界値。

**緩和要因**:
1. 方向スコア +0.933 が圧倒的に高い
2. 遷移駆動の q-18, q-20 は P3→P4 の核心的な遷移質問
3. 駆動・逆方向の q-23, q-27 は層3,4 に位置し P3 フェーズでは到達困難

**判定**: 実質的に頑健。差し戻し不要。

### 総合判定

静的分析では P1→P2 と P2→P3 で形式的な不充足が検出されたが、いずれも構造的特性に起因し、neighbors 制約・層構造・flip カバーによる緩和要因が存在する。**動的検証（シミュレーション）で最終的な挙動を確認する必要がある。**

> **注記**: 動的検証（Step 2）は POC エンジンによるシミュレーションが必要であり、本手動適用では静的分析までを実施する。動的検証は形式化後のシミュレーションフェーズで実施する。
