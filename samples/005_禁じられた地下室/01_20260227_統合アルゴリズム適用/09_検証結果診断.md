# 検証結果診断

使用規則: 不足ルーティング

## 検証スクリプト結果

| 検証 | レベル | 結果 |
|------|--------|------|
| 到達可能性 | L2-0 | **NG** — O\*: P1→S1→P3→P4（P5到達不能） |
| 完全性 | L2-1 | **NG** — P1, S1 で Fs-84, Ft-20 未カバー |
| 同化接続性 | L2-2 | NG（適用保留中） |
| 発掘連鎖 | L2-3 | OK |
| 多層構造 | L2-4 | **NG** — P5: 層0比率 1.00, S1: 0.80 |
| 到達パス | L2-5 | **NG** — 全51試行 P1→P2 で停止（14ステップ） |
| 前提閉包性 | L3-6 | OK |

## 根本原因分析

### 主因: R(P) の関係がゲート開放に不十分

エンジンの `open_questions` は3段階で質問のオープンを判定する:

1. パラダイム所属チェック
2. prerequisites が全て O に存在
3. **R(P) 到達性チェック**: effect 記述素の少なくとも1つが、consistent/anomaly 集合から R(P) 経由で到達可能

条件3がボトルネック。各パラダイムのゲート開放率:

| パラダイム | 層0→層1 | 層1→層2 |
|-----------|---------|---------|
| P1 | 11%（1/9） | 50%（3/6） |
| P2 | 10%（1/10） | 50%（3/6） |
| P3 | 8%（1/13） | 0%（0/11） |
| P4 | 8%（1/13） | 12%（2/16） |

R(P) の関係数が極めて少ない（P1: 7本、P3: 5本）ため、consistent/anomaly 集合からの BFS 到達範囲が狭すぎる。

### 具体例: P1 の層0回答後

層0（14問）回答後の P1 における状態:
- **consistent**: {Fs-14, Fs-96, Fs-23, Fs-88}（P1 の予測と一致）
- **anomaly**: {Fs-1, Fs-19, Fs-31, M-3, Fs-84}（P1 の予測と不一致）

R(P1) の関係（7本）は全て Fs-31 起点。consistent 集合からの到達先はゼロ。anomaly 集合からの到達先は {Fs-71, Fs-34, Ps-1, Ps-5, Ps-6, Fs-83} のみ。

層1の effect 記述素 9個のうち、到達可能なのは Fs-96（consistent 経由）の1個のみ。

### 副因1: 完全性ギャップ

q24（Fs-84 を生成）と q27（Ft-20 を生成）が P1, S1 のパラダイムリストに含まれていない。

### 副因2: irrelevant 質問のオープン不可

エンジンの `open_questions` は effect がタプルリストの場合のみ R(P) チェックを行う。irrelevant 質問の effect は文字列リストのため、R(P) チェックをパスできず動的にオープンしない。q10, q35 が該当。

### 副因3: init_question_ids の不足

prerequisites なしの質問のうち q21, q23, q24 が init_question_ids に含まれていない。R(P) が疎いため動的オープンもできず、永久にクローズ。

## 不足分類（Step 4g ルーティング表）

| 不足 | 種類 | 差し戻し先 | 対処 |
|------|------|-----------|------|
| R(P) 関係の不足 | 素材不足 | Phase 1 | ゲート辺の追加、横辺の充実 |
| 完全性ギャップ | 質問不足 | Phase 3 | q24, q27 のパラダイム割当修正 |
| init_question_ids 不足 | 質問不足 | Phase 3 | prerequisites なし質問の追加 |
| irrelevant オープン | エンジン仕様 | — | init_question_ids で対応 |

## 差し戻し計画

Phase 1（R(P) 強化）→ Phase 3（質問修正）→ Phase 4（再検証）→ 形式化

Phase 2（質問構造設計）の根本的再設計は不要。現在の層構造と到達経路の設計は概念的に正しく、R(P) の実装が不十分だったのが原因。
