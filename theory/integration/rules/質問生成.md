# 質問生成

## 概要

統合アルゴリズム Phase 3 の規則。Phase 2 の構造設計をもとに、具体的な質問を生成し検証する。

## 参照する個別アルゴリズム

- **Q1**（パラダイム構造準拠型質問生成アルゴリズム）: 質問候補の網羅的生成、偶然の開きの生成、役割付与、大区分配置、前提事実の割り当てを行う
- **Q2**（内部構造活用型質問生成アルゴリズム）: フェーズ到達保証、同化接続性検証を行う

## 適用手順

### Step 1: 質問候補生成

Q1 Step 1〜3 に相当する手順を、Phase 2 の層配置を尊重して実行する。

- 質問候補を網羅的に生成する
- パラダイムごとに拡充する
- 偶然の開きを生成する（Phase 2 が設計した深い層への配置を尊重する）

### Step 2: 認知的前提の設定

Phase 2 の逆算結果（認知的到達経路）から各質問の prerequisites を導出する。

- 認知的到達経路の各ステップが prerequisites として表現される
- prerequisites は論理的成立条件ではなく認知的条件である

### Step 3: 役割付与・大区分配置

Q1 Step 4〜5 に相当する手順を実行する。

- 各質問に役割（探索、蓄積、駆動、分岐）を付与する
- 大区分（I / II / III）に分類する

### Step 4: フェーズ到達・同化接続性の検証

Q2 Step 7〜9 に相当する手順を実行する。

- フェーズ到達保証を検証する
- 同化接続性を検証する

## 出力

- 質問群（ans 写像、prerequisites、役割、大区分情報付き）

## Phase 4 からの差し戻し時

不足ルーティングにより Phase 3 への差し戻しがあった場合、検証結果に基づいて質問の追加・修正を実施する。
