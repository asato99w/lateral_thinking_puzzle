# S1

## 概要

opening_reach の構造的不足検出結果を入力とし、各パラダイムの anomaly 到達性を充足させる追加記述素・関係・質問を生成する独立アルゴリズム。

E1/E2 による記述素空間展開と内部構造構成の後に実行され、構造的欠陥を補填する。将来的な反復型統合アルゴリズムの構成要素として設計されている。

## 入力

- opening_reach の分析結果（各パラダイムの判定結果）
  - 固有記述素 E(P_i) とその個数
  - R(P_i) による到達可能記述素
  - anomaly 生成質問と anomaly 上界
  - threshold との比較結果（OK/NG）
  - 診断情報（到達不能な共有記述素、固有→非固有の関係数）
- 現在の記述素空間 F'
- パラダイム群（D⁺, D⁻, R(P)）
- 質問群

## 使用規則

- anomaly 到達性充足（新規）
- 架け橋合成（E2 と共有）
- 部分的理解生成（E2 と共有）
- 関係構造の構成 Rule 3, Rule 4（参照）

## 手順

### Step 1: 不足類型の診断

各 NG パラダイム P_i について不足類型を判定する。

- **類型 A（固有記述素の欠如）**: |E(P_i)| == 0
- **類型 B（R(P) 接続性の欠如）**: |E(P_i)| > 0 かつ 固有→共有の関係数 == 0
- **類型 C（anomaly 上界の不足）**: 上記いずれでもなく anomaly 上界 < threshold

類型 A は B を、B は C を含意するため、A → B → C の順に対処する。

### Step 2: 固有記述素の生成（類型 A 対応）

規則「部分的理解生成」を P_i に特化して適用する。

1. P_i の説明の中で、隣接パラダイムには含意できない独自の解釈・視点を特定する
2. 当該解釈に固有な記述素を生成する
3. 生成条件: ∀ j ≠ i, d ∉ D(P_j) を満たすこと（固有性の保証）
4. 生成数: Step 4 での anomaly 生成に十分な数（類型 C の解消に必要な到達可能性を逆算）

### Step 3: R(P) の接続強化（類型 B 対応）

関係構造の構成 Rule 3, Rule 4 を定量的に適用する。

1. Step 2 で生成した固有記述素（または既存の固有記述素）を起点とする
2. 共有記述素のうち、anomaly 生成に寄与するものをターゲットとして選定する
   - P_i の prediction と真値が異なる記述素を effect に含む質問に関連する共有記述素を優先
3. 固有→ターゲット共有の関係を R(P_i) に追加する
4. w は Rule 4 の強い関係（w > 0.6）を基本とする（1ホップの同化で EPSILON 圏内に到達する必要があるため）

### Step 4: 質問の補強（類型 C 対応）

1. opening_reach の到達可能記述素を effect に含み、かつ P_i の prediction と真値が異なる記述素も effect に含む質問を設計する
   - 前者は「開口記述素」: 同化連鎖で H が正解方向に動き質問が開く
   - 後者は「anomaly 記述素」: P_i の予測を裏切る
2. anomaly 上界が threshold 以上になるまで質問を追加する

### Step 5: 再検証

opening_reach を再実行し、規則「anomaly 到達性充足」を検証する。NG のパラダイムがあれば Step 1 に戻る。

## 出力

- 追加された記述素（F' への追加分）
- 追加・変更された R(P) 関係
- 追加された質問

## Q2 との関係

S1 と Q2 は相補的に機能する。

- **S1 の担当**: 記述素空間と R(P) の構造的充足（anomaly 到達性の確保）
- **Q2 の担当**: 質問設計の検証（フェーズ到達保証、同化接続性検証）

S1 の Step 4（質問の補強）は Q2 の Step 8（同化接続性検証）の不足対処と重なる。統合アルゴリズムでは、S1 が構造的充足を先に確保し、Q2 が質問レベルの整合性を検証する順序が自然である。

opening_reach の分析結果は Q2 にも直接活用できる:

- 到達可能記述素 → Q2 Step 8 の同化起点からの到達可能ターゲットに対応
- anomaly 上界の診断 → Q2 Step 8.4「不足がある場合」の入力に対応
- 到達不能な共有記述素リスト → Q2 が優先的に質問を生成すべき記述素に対応

## 備考

- S1 は E1/E2 の出力を変更しない（追加のみ）
- opening_reach スクリプトの分析結果を構造的に活用する初のアルゴリズムであり、eval スクリプトと理論的アルゴリズムの橋渡しとなる
- 将来的な統合アルゴリズムでは S1 → Q2 → opening_reach → ... の反復ループの構成要素として位置づけられる
