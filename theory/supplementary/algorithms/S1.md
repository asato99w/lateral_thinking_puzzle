# S1: 構造的充足検証・補完アルゴリズム

## 概要

質問群と R(P) の構造がパラダイムシフトを支えるために十分かを検証し、不足を補完するアルゴリズム。

Q1 が質問を生成した後に実行され、アノマリー導入質問の完全性を検証する。統合アルゴリズムの反復ループの構成要素として設計されている。

## 入力

- 記述素空間 F'
- パラダイム群（P_pred, R(P)）
- 質問群（Q1 の出力）
- メインパスの遷移順序

## 出力

- 追加された質問
- 検証結果（完全性の OK/NG）

## 手順

### Step 1: アノマリー導入質問の検証

各パラダイム P_i（T を除く）について、アノマリーを導入できる質問が十分に存在するかを検証する。

1. 各 P_i に対して、effect が以下の両方を含む質問を列挙する:
   - P_pred(P_i, d) と真値が一致する記述素（同化で H が正解方向に動き、質問がオープンする理由となる）
   - P_pred(P_i, d) と真値が食い違う記述素（回答により O に入り、アノマリーとなる）
2. 列挙された質問がシフトに必要な数のアノマリーを蓄積できることを確認する
3. **完全性の検証（局所条件）**: P_i の RequiredAnomaly(P_i)（= Anomaly(P_i) \ UpperShared(P_i)）がいずれかの Q(P_i) の質問の effect でカバーされるかを確認する。UpperShared（より深いパラダイムと共有するアノマリー）は、より深いパラダイムのフェーズで発掘されるため、Q(P_i) でのカバーを免除する。カバーされない RequiredAnomaly 記述素が存在する場合、NG とする
4. **完全性の検証（大域条件）**: 全パラダイムの全アノマリー記述素が、いずれかの Q(P') でカバーされているかを確認する。共有アノマリーであっても、どの Q(P') にもカバーされていなければ NG とする

NG の場合: Q1 への差し戻し（アノマリー導入質問の追加設計）

### Step 2: 同化接続性の検証

> **適用スキップ**: 推定 O に基づく近似の信憑性が未確定のため適用を保留する。到達パス検証（L2-5）と構造的品質診断（L3-6/L3-7）が代替的な検証手段を提供する。

### Step 3: 動的発掘連鎖の検証

> **適用スキップ**: シミュレーションが1本のパスしか辿らないため、通過しないパラダイムの扱いが未定義。Step 2 と合わせて適用を保留する。

### Step 4: 再検証

Step 1 の対処（質問の追加）が他の検証を壊していないことを確認する。Step 2・3 が適用スキップ中のため、Step 1 の再実行のみとなる。

## Q1 Step 6 との関係

Q1 の前提事実の割り当て（prerequisites の設定）は質問のオープン条件を厳しくするため、完全性に影響する可能性がある。統合アルゴリズムの反復ループにおいて、prerequisites の追加後は到達パス検証（L2-5）で行き詰まりが発生していないことを確認する。

## 備考

- S1 は記述素空間 F' を変更しない（質問群を追加・変更する）
- 名称は暫定的なもの
- 本アルゴリズムの性質については theory/terms.md「アルゴリズムの性質」を参照
