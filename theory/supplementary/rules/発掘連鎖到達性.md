# 発掘連鎖到達性

## 概要

init_questions の質問群からの同化連鎖によって、全アノマリー導入質問が段階的に発掘可能であることを保証する規則。

同化接続性検証が各遷移における静的な接続性を保証するのに対し、本規則はゲーム全体の動的な進行における発掘可能性を保証する。

## 背景

静的な接続性と実際のゲーム進行（動的シミュレーション）にはギャップがある:

1. 静的に接続していても、ゲーム進行の順序制約で実際には発掘されないケースがある
2. パラダイムシフト後の同化による到達は、各遷移独立の静的分析では捉えきれない

本規則はこのギャップを埋めるために、ゲーム進行全体を通じた動的な発掘可能性を要求する。

## 定義

- **safe 質問**: effect の全 (d, v) が P_init の予測と矛盾しない質問
- **anomaly 質問**: effect に P_init の予測と矛盾する (d, v) を含む質問
- **発掘連鎖**: safe 質問の回答 → O 更新 → R(P) 到達性によるオープン判定 → 新規質問の発見、という連鎖。発掘された anomaly 質問の回答も連鎖に加わる

## 検証手順

1. init_questions で得られる質問のみを初期オープンとする
2. 質問を順次回答し、同化による H 変化を追跡する
3. H 変化で新たにオープンされる質問を検出する
4. 新規オープンの中で anomaly 質問があれば「発掘」として記録する
5. 発掘された anomaly 質問も回答対象に加え、連鎖を続行する
6. 連鎖が停止するまで繰り返す

## 検証条件

```
発掘連鎖シミュレーションの結果:
  各パラダイムの固有アノマリー記述素が発掘可能であること
```

固有アノマリーとは、他のどのパラダイムとも共有されていないアノマリー記述素を指す（UniqueAnomaly(P) = Anomaly(P) \ ∪_{P'≠P} Anomaly(P')）。共有アノマリーは他パラダイムのフェーズで O に入りうるため、各 P の発掘必須対象から除外する。ただし、共有アノマリーもいずれかのパラダイムのフェーズで発掘される必要がある（大域条件）。

## 不充足時の原因

- anomaly 質問の effect 記述素に対して、R(P) による到達性が確保されていない
- 発掘に必要な先行質問が開かない（循環依存）
- パラダイムシフトの未発生により、到達経路が活性化しない
- prerequisites の記述素が O に入る経路が確保されていない

## 不充足時の対処

対処は構造側（R(P)・質問設計）で行う:

1. **R(P) の強化**: 同化連鎖で H が動くための関係を追加する
2. **質問設計の調整**: アノマリー導入質問の effect に、同化連鎖で H が動く記述素を含める
3. **中間質問の追加**: 段階的に発掘が進む連鎖を構成する
4. **prerequisites の到達経路確保**: prerequisite 記述素を確定させる質問がオープンする同化経路を R(P) に構成する

## 同化接続性検証との関係

| 観点 | 同化接続性検証 | 発掘連鎖到達性 |
|------|--------------|---------------|
| 分析単位 | 遷移ごと | ゲーム全体 |
| 手法 | 静的（R(P) の到達可能性） | 動的（シミュレーション） |
| 保証内容 | 構造的に接続している | 実際に発掘される |

同化接続性検証は発掘連鎖到達性の必要条件（構造が整っていなければ動的にも到達しない）だが十分条件ではない。

## 備考

- S1 アルゴリズムの Step 3（動的発掘連鎖の検証）の終了条件として使用される
