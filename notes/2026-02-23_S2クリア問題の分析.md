# S2クリア問題の分析

最短ルート分析により、depth=0のサイドパラダイムS2からゲームをクリアできることが判明。P4（depth=3）を一切経由しない。段階的情報開示の設計が機能していない。

## 発見されたルート

P1 → P2 → P3 → S2 → CLEAR（10問: q01→q07→q100→q63→q65→q64→q102→q33→q74→q60）

## 問題の構造

### 1. コアブロックの「参照」概念が狭い

q60のテキスト「過去のスープが**人肉**だったと悟りましたか？」はFt-29（人肉を食べた）を概念的に前提とする。しかし `_question_descriptors` はans_yes/ans_no/ans_irrelevant（真偽が更新される記述素）のみを返す。Ft-29はどのansにも含まれないため、コアブロックをすり抜ける。

質問が「参照する記述素」に2種類ある：
- **効果記述素**: 回答により真偽が更新される（現在のans_yes/ans_no/ans_irrelevant）
- **関連記述素**: 質問テキストが概念的に前提とするが、真偽は更新しない

コアブロックは両方に対して判定すべき。

### 2. depthの定義が曖昧

現状: P1=0, P2=1, P3=2, P4=3, P5=4, S1=0, S2=0

「真理論からの距離」とされるが、メインパスの順序を手動で割り振っただけ。サイドパラダイムのdepthをどう決めるかの基準がない。

### 3. tension/alignmentがD(P)の小さいパラダイムに構造的に有利

**tension**: `|{d ∈ O ∩ D(P) | P(d) ≠ O(d)}|`。S2のD(P)は3要素、P4は22要素。矛盾しうる記述素が少ないほどtensionが低く、シフト候補条件 `tension(O, 候補) < tension(O, 現在)` を満たしやすい。

**alignment**: `Σスコア / |D(P)|`。|D(P)|で正規化するため、要素数が少ないほど個々のH値の影響が大きく不安定に高くなりやすい。未観測記述素（H=0.5）が多い大きなD(P)は中庸なスコアに留まる。

何も予測しないパラダイムほど高評価される構造になっている。

---

## 根本原因の分析

### 問題3の根はD(P)の設計思想にある

「何も予測しないパラダイムが有利」という問題は、anomalyの定義に起因する。anomaly = D(P)に含まれる記述素のうちO*での予測と矛盾するもの。D(P)に含めなければanomalyにならない。

ウミガメのスープのデータでこれを検証すると、Explained(P) = {(d, P(d)) | d ∈ D(P), P(d) = O*(d)} の包含関係によるdepthの導出で、P4のanomaly {Fs-01} がP1〜P3のanomalyに含まれない。P4が新しいanomalyを導入しており、包含関係が成立しない。これはデータの問題でもあるが、D(P)を小さくする動機が構造的に存在する設計上の問題でもある。

### D(P)の概念がコアに近い

歴史的経緯: パラダイムを定義した段階ではコア概念がまだなかった。D(P)に含めるかどうかの判断が「このパラダイムの概念体系で記述可能か」という基準で行われ、D(P)が実質的に「概念的な可視範囲」を表すものになった。後からコア概念が導入されたが、D(P)の性質は見直されなかった。

---

## 再設計の方向性

クーンの理論に立ち返り、パラダイムの構造を一から再検討した。

### パラダイムの構造

パラダイムが持つもの：

- **予測マップ P_pred: {d → 0 | 1 | unknown}** — 想起可能性に関係なく、パラダイムの世界観から論理的に導出される予測すべて。unknownは真偽どちらも導出できない状態。
- **想起可能集合 Conceivable(P)** — パラダイムの概念体系で自然に想起される記述素の部分集合。

現在のD(P)は想起可能性でフィルタされた中途半端なものだった。予測マップは想起可能性に関係なく、世界観が論理的に含意する予測をすべて含む。例: P1（日常の食事）ではFt-29（人肉を食べた）は想起されないが、Ft-29=0は論理的に導出される。

### 説明力とdepth

**explained(O, P) = |{d ∈ O | P_pred(d) = O(d)}|** — Oのうち正しく説明できる数。Oを引数に取る。

完全観測O*を入れたexplained(O*, P)がパラダイムの序列を与える：

**Explained(P) = {(d, P_pred(d)) | P_pred(d) = O*(d)}** — 符号込み

Explained(P) ⊂ Explained(P') ならば depth(P) < depth(P')。部分順序。サイドパラダイムはメインパスと比較不能な位置に自然に配置される。

### 想起可能とコア

想起可能集合がパラダイムごとに独立に定義されるため、コア概念は不要（想起可能の差分として導出可能）。

質問ブロック: 質問qが参照する記述素（効果・関連とも）のいずれかが Conceivable(P_current) に含まれなければブロック。

効果記述素と関連記述素の区別はデータとして必要（質問がどの記述素を前提とするかの情報）。判定メカニズムはConceivable(P)への所属判定に統一される。

### パラダイムシフト

**発動**: tension（anomaly蓄積）が閾値を超える。閾値の導出方法は後日検討（予測数に対する比率なども候補）。

**方向**:
- 候補の絞り込み: explained_o(O, P') > explained_o(O, P_current) を満たすパラダイム（現在より説明力が高い）
- 候補内の選択: alignment(H, P') が最大のパラダイム

現在の構造（tensionが候補条件、alignmentが選択）と同じ役割分担。tensionによる発動判定をexplained_oによる候補絞り込みに置き換えた形。alignmentとHの役割は維持。

### 要検討

- 発動の閾値導出方法（比率ベースなど）
- 近傍: P_predが大きくなると重なりが増え、近傍が自明になる可能性
- alignment: P_predの大きさの差が残る場合の正規化
- 関係構造(relations): 同化メカニズムにおける位置づけ
