# シフト先決定の再設計

## 現在の方式

```
候補 = { P' | explained_o(O, P') > explained_o(O, P_current) }
P_new = argmax alignment(H, P')
```

- H（暫定理論）に基づく。同化の影響で H が偏り、遠いパラダイムが高スコアになりうる
- これがスキップリスクの根本原因

## 提案: 最小緩和原理

### 基本方針

シフト先を「観測された不一致を最小限だけ緩和するパラダイム」とする。

```
候補 = { P' | tension(O, P') < tension(O, P_current) }
P_new = argmax { tension(O, P') | P' ∈ 候補 }   ← 最小緩和
```

- H に依存しない。O と Conceivable のみで判断
- 完全確定では常に隣接パラダイムに遷移し、跳躍が構造的に起きない

### 同点問題

tension は整数値のため同点が発生しやすい。

特に深刻なのは P_current と候補の tension が同点になるケース。strict inequality で候補が空になり、シフトできない。同点を `<=` で許容すると、タイブレークが必要になるが、そこで alignment 等を使うと元の問題に戻る。

→ P_pred のアナログ化で tension が連続値になれば根本的に解消される。ただしアナログ化以外の方向も検討する。

## 同点解消の方向: アノマリー中心の指標

### 指標 1: resolve（アノマリー解消数）

P_current のアノマリー集合 A = { d ∈ O ∩ Conceivable(P_current) | P_pred(P_current, d) ≠ O(d) } について、各候補 P' が A のうちいくつを正しく予測するか。

```
resolve(P') = |{ d ∈ A | P_pred(P', d) = O(d) }|
```

同じ tension でも A に対する振る舞いが異なる。最小緩和 = resolve が最小（だが > 0）の候補。

### 指標 2: attention（アノマリー注目度）

A の記述素が P' の Conceivable に含まれているか。

```
attention(P') = |{ d ∈ A | d ∈ Conceivable(P') }|
```

- Conceivable に含まれている = P' はそのアノマリーを認識している（向き合っている）
- Conceivable に含まれていない = そのアノマリーを無視して別の世界観に跳んでいる

attention が高い方を優先すれば、跳躍的なパラダイム（P_current のアノマリーを見ていない）が自然に排除される。

### 組み合わせ

tension（最小緩和）→ attention（同点時）→ resolve（さらに同点時）→ ... のように、条件を段階的に適用する。各指標は追加で思いつき次第足していける拡張可能な設計。

## 残課題

- P_pred のアナログ化: tension が連続値になれば同点問題自体が解消。別途検討
- 各指標の具体的な挙動: ウミガメのスープのデータで実際にシミュレーションして検証
- threshold との関係: 最小緩和原理のもとで threshold の導出方法に変更が必要か
