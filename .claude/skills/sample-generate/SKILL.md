# /sample-generate — サンプル生成（正式フロー）

## 概要

統合アルゴリズムに従い、入力からサンプル文書を生成する。
サンプルの再生成が必要な場合の正式フローはこのスキルを使う。

## 引数

- `$ARGUMENTS`: パズルのタイトル（例: `ウミガメのスープ`）

## 事前条件

- 問題文（S）と真理論（T）が提示されていること
- 対象パズルの NNN 連番が決まっていること（既存の場合は次の反復連番を付与）

## 手順

### 1. ディレクトリ作成

```
samples/NNN_タイトル/NN_YYYYMMDD_統合アルゴリズム適用/
```

- NNN: パズル連番（既存なら既存の NNN を使用、新規なら次の連番）
- NN: 反復連番（既存パズルなら最後の反復 +1、新規なら 01）
- YYYYMMDD: 本日の日付

### 2. アルゴリズム適用

`theory/integration/algorithms/統合アルゴリズム.md` を読み、そこに記述された手順に従う。各フェーズの出力をファイルとして順次生成する。

- 各ファイルの冒頭に使用した規則・アルゴリズム名を明記する
- 生成済みファイルは変更しない。差し戻しが発生した場合は新しいファイルを追加する
- ファイルの数や名前はアルゴリズムの進行と反復に応じて決まる

### 3. 形式化

アルゴリズム適用の最終段階として、`/sample-import` で取り込み可能な形式化ファイルを生成する。

形式化ファイルは `app/poc/src/models.py` のデータ構造が要求する全フィールドを満たす完全データを含む。省略・曖昧さがあってはならない。

形式化ファイルから JSON への変換は、内容の解釈や推測を一切必要としない機械的操作でなければならない。

### 4. 反復判定

検証で NG が出た場合はユーザーに報告し、反復の要否を確認する。

## 参照ファイル

- `theory/integration/algorithms/統合アルゴリズム.md` — アルゴリズム本体
- `theory/integration/rules/` — 統合ルール群
- `app/poc/src/models.py` — 形式化の仕様定義元
- `samples/_template.md` — 命名規則

## 禁止事項

**既存サンプル・既存データの参照禁止**: サンプル生成時に、既存の `samples/` 内の他のサンプルや `app/poc/data/` 内の JSON データを参考にしてはならない。入力は理論（`theory/`）と問題文（S, T）のみ。既存サンプルを参照すると、過去の誤りや構造的欠陥が伝播する。

## 注意事項

- 各ファイルで参照した規則名を冒頭に明記する
