# /sample-generate — サンプル生成

## 概要

指定されたアルゴリズムに従い、サンプル文書を生成する。新規生成・中断からの再開・理論変更に伴う再生成に使う。

## 引数

- `$ARGUMENTS`: パズルのタイトルとアルゴリズムのパス
  - 例: `ウミガメのスープ theory/integration/algorithms/統合アルゴリズム.md`
- アルゴリズムが指定されていない場合、ユーザーに確認する

## 事前条件

- 問題文（S）と真理論（T）が提示されていること
- 対象パズルの NNN 連番が決まっていること（既存の場合は次の反復連番を付与）

## 手順

### 1. 状態の判定

対象の反復ディレクトリを確認する。

- **ディレクトリが存在しない**: 新規生成。ディレクトリを作成して手順2へ
- **ディレクトリが存在し、ファイルがある**: 再開。生成済みファイルからアルゴリズムのどの段階まで完了しているかを判断し、続きから手順2へ

ディレクトリ命名: `samples/NNN_タイトル/NN_YYYYMMDD_アルゴリズム名適用/`

### 2. アルゴリズム適用

指定されたアルゴリズムを読み、そこに記述された手順に従う。各フェーズの出力をファイルとして順次生成する。

- 各ファイルの冒頭に使用した規則・アルゴリズム名を明記する
- 生成済みファイルは変更しない。差し戻しが発生した場合は新しいファイルを追加する
- ファイルの数や名前はアルゴリズムの進行と反復に応じて決まる

### 3. 形式化

アルゴリズム適用の最終段階として、`/sample-import` で取り込み可能な形式化ファイルを生成する。

形式化ファイルは `app/poc/src/models.py` のデータ構造が要求する全フィールドを満たす完全データを含む。省略・曖昧さがあってはならない。

形式化ファイルから JSON への変換は、内容の解釈や推測を一切必要としない機械的操作でなければならない。

### 4. 反復判定

検証で NG が出た場合はユーザーに報告し、反復の要否を確認する。

## 参照ファイル

- 指定されたアルゴリズム — 手順の定義元
- `app/poc/src/models.py` — 形式化の仕様定義元
- `samples/_template.md` — 命名規則

## 禁止事項

**既存サンプル・既存データの参照禁止**: サンプル生成時に、既存の `samples/` 内の他のサンプルや `app/poc/data/` 内の JSON データを参考にしてはならない。入力は理論（`theory/`）と問題文（S, T）のみ。既存サンプルを参照すると、過去の誤りや構造的欠陥が伝播する。

## 注意事項

- 各ファイルで参照した規則名を冒頭に明記する
