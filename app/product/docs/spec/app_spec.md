# アプリ外部仕様

## 製品概要

水平思考パズル（ウミガメのスープ）をプレイするiOSアプリ。
プレイヤーは提示された不思議な状況に対し、YES / NO で答えられる質問を選んで真相に迫る。

## 画面一覧

| 画面 | 概要 |
|------|------|
| パズル一覧画面 | パズルを選んでゲームを開始する |
| ゲーム画面 | 質問を選んでパズルを解く |
| クリア画面 | パズルクリア時の結果表示 |

## 画面仕様

### 1. パズル一覧画面

プレイ可能なパズルの一覧を表示する。

**表示内容**:
- パズルタイトル（例: 「バーの男」「ウミガメのスープ」）
- パズルの出題文（冒頭の一部）

**操作**:
- パズルをタップ → ゲーム画面へ遷移

### 2. ゲーム画面

パズルのメインプレイ画面。

**表示内容**:

| 領域 | 内容 |
|------|------|
| 出題文 | パズルの状況説明。常時表示 |
| オープン質問群 | 現在選択できる質問のリスト |
| 回答済み質問群 | 選択済みの質問と回答結果の履歴 |

**回答の種類**:

| 回答 | 意味 | 表示色 |
|------|------|--------|
| YES | その通り | 緑系 |
| NO | 違う | 赤系 |
| 関係ない | この問題には関係ない | グレー系 |

**操作**:
- オープン質問をタップ → 回答が表示される
- 回答済み質問群はスクロールで確認可能

### 3. クリア画面

パズルの真相に到達した際に表示する。

**表示内容**:
- クリアメッセージ
- パズルの解説（真相）
- 一覧に戻るボタン

## ゲームフロー

```
1. パズル一覧からパズルを選択
2. 出題文とオープン質問群が表示される
3. プレイヤーがオープン質問を1つ選択する
4. 回答（YES / NO / 関係ない）が表示される
5. 選択した質問は回答済み質問群に移動する
6. 新たな質問が0〜複数個、オープン質問群に追加される
7. 3〜6 を繰り返す
8. 真相に到達する質問を選択するとクリア
```

**補足**:
- オープン質問群はゲームの進行に応じて変化する
- 序盤は基本的な質問のみ、回答を重ねるとより核心に迫る質問が出現する
- すべての質問が最初から見えるわけではない

## コンテンツ配信

パズルはダウンロードコンテンツとしてアプリに追加される。

**配信方式**:
- Apple の On-Demand Resources (ODR) を利用する
- 自前のAPIサーバは用意しない
- パズルデータは App Store にホスティングされ、必要時にダウンロードされる

**コンテンツ構成**:
- 初期同梱: 数問のパズルをアプリバンドルに含める（オフラインでも即プレイ可能）
- 追加コンテンツ: 新しいパズルは ODR タグ単位で配信される

**パズル一覧画面での表示**:
- ダウンロード済みパズル: そのままプレイ可能
- 未ダウンロードパズル: タップでダウンロード → プレイ可能に
- ダウンロード中: 進捗表示

## アプリ内課金（将来対応）

将来的にアプリ内課金によるコンテンツ制限を導入する。

**想定モデル**:
- StoreKit 2 を利用する
- 無料パズル: 一部のパズルは無料でプレイ可能
- 有料パズル: 課金により追加パズルをアンロック
- 課金形態は今後決定（パズル単体 / パック / サブスクリプション等）

**初期リリース時点**:
- 課金機能は実装しない
- ただし、将来の課金導入を前提としたデータ構造（パズルに無料/有料フラグ等）は考慮する

## 初期リリースの対象外

以下は初期リリースには含めない。

- ユーザーアカウント・ログイン
- クリア履歴の保存
- ヒント機能
- アプリ内課金の実装
- 多言語対応（日本語のみ）
